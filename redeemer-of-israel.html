<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Redeemer of Israel</title>
    <meta name="description" content="Activity page for the hymn Redeemer of Israel">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image"
      content="https://ethyl2.github.io/primary-song-activities/images/wonder/second-coming.jpeg">
    <meta property="og:url" content="https://ethyl2.github.io/love-one-another">
    <meta property="og:title" content="Redeemer of Israel">
    <meta property="og:description" content="Activity page for the hymn Redeemer of Israel">
    <meta property="og:type" content="website" />
    <link rel="icon" type="image/x-icon" href="favicon.ico?">
    <link rel="apple-touch-icon" sizes="180x180"
      href="https://ethyl2.github.io/primary-song-activities/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32"
      href="https://ethyl2.github.io/primary-song-activities/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"
      href="https://ethyl2.github.io/primary-song-activities/favicon-16x16.png">
    <link rel="manifest" href="https://ethyl2.github.io/primary-song-activities/site.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kurenaido&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <style>
      @keyframes shake {
        0% {
          transform: translate(1px, 1px) rotate(0deg);
        }

        10% {
          transform: translate(-1px, -2px) rotate(-1deg);
        }

        20% {
          transform: translate(-3px, 0px) rotate(1deg);
        }

        30% {
          transform: translate(3px, 2px) rotate(0deg);
        }

        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }

        50% {
          transform: translate(-1px, 2px) rotate(-1deg);
        }

        60% {
          transform: translate(-3px, 1px) rotate(0deg);
        }

        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }

        80% {
          transform: translate(-1px, -1px) rotate(1deg);
        }

        90% {
          transform: translate(1px, 2px) rotate(0deg);
        }

        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }

      .shake:hover {
        /* Start the shake animation and make the animation last for 0.5 seconds */
        animation: shake 0.5s;

        /* When the animation is finished, start again */
        animation-iteration-count: infinite;
      }

      .grow:hover {
        transform: scale(1.05);
      }
    </style>
  </head>

  <body class="relative min-h-screen bg-center bg-repeat bg-contain">
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <header class="flex flex-col shadow-lg items-center justify-center py-2 pt-4 md:py-10 bg-black">
      <h1 id="title"
        class="text-bold text-xl md:text-5xl text-center font-bold pb-2 md:pb-4 text-white cursor-pointer shake">
       Redeemer of Israel</h1>
    </header>

    <div class="flex flex-wrap items-center justify-center md:flex md:flex-nowrap mx-auto pt-4">
      <div class="bg-cover bg-center w-32 h-32 md:w-48 md:h-48 bg-no-repeat" style="background-image: url('./images/redeemer/shepherd1.jpeg')"></div>
      <div class="bg-cover bg-center w-32 h-32 md:w-48 md:h-48 bg-no-repeat" style="background-image: url('./images/redeemer/shepherd2.jpeg')"></div>
      <div class="bg-cover bg-center w-32 h-32 md:w-48 md:h-48 bg-no-repeat"
        style="background-image: url('./images/redeemer/shepherd3.jpeg')"></div>
      <div class="bg-cover bg-center w-32 h-32 md:w-48 md:h-48 bg-no-repeat"
        style="background-image: url('./images/redeemer/shepherd4.png')"></div>
      <div class="bg-cover bg-center w-32 h-32 md:w-48 md:h-48 bg-no-repeat"
        style="background-image: url('./images/redeemer/shepherd5.png')"></div>
      <div class="bg-cover bg-center w-32 h-32 md:w-48 md:h-48 bg-no-repeat"
        style="background-image: url('./images/wonder/second-coming.jpeg')"></div>
    </div>
    <main
      class="font-sans min-h-screen flex flex-col items-center mx-auto justify-start mt-8 pb-8 mb-8 text-center space-y-6 rounded-lg md:my-12 md:space-y-10">

      <div class="container flex flex-col md:items-start md:justify-between md:flex-row w-full">
      <div class="whitespace-pre-line order-2 md:order-1 text-xs md:text-sm shrink md:w-1/4 xl:text-base">
        1. Redeemer of Israel,
        Our only delight,
        On whom for a blessing we call,
        Our shadow by day
        And our pillar by night,
        Our King, our Deliv'rer, our all!

        2. We know he is coming
        To gather his sheep
        And lead them to Zion in love,
        For why in the valley
        Of death should they weep
        Or in the lone wilderness rove?

        3. How long we have wandered
        As strangers in sin
        And cried in the desert for thee!
        Our foes have rejoiced
        When our sorrows they've seen,
        But Israel will shortly be free.

        4. As children of Zion,
        Good tidings for us.
        The tokens already appear.
        Fear not, and be just,
        For the kingdom is ours.
        The hour of redemption is near.

        5. Restore, my dear Savior,
        The light of thy face;
        Thy soul-cheering comfort impart;
        And let the sweet longing
        For thy holy place
        Bring hope to my desolate heart.

        6. He looks! and ten thousands
        Of angels rejoice,
        And myriads wait for his word;
        He speaks! and eternity,
        Filled with his voice,
        Re-echoes the praise of the Lord.
      </div>
      <section class="order-1 md:order-2 shrink-0">
        <h2 class="text-2xl">BINGO</h2>
        <p>Click on the button to get a random word from the hymn. Then <span class="md:hidden">touch</span> <span class="hidden md:inline">click on </span> the word in the bingo grid.</p>
        <p>Repeat until you get a whole line completed!</p>
        <button id="word-button" type="button" class="rounded-lg py-2 px-4 border-2 bg-blue-200 border-black hover:bg-blue-100 my-4">Get Word!</button>
        <p id="current-word"></p>
        <div id="bingo" class="text-xs md:text-xl border-2 border-black shadow-lg md:text-xl font-medium md:font-bold">
        </div>

      </section>
      </div>
      <audio controls>
        <source src="./audio/redeemer-of-israel.mp3" type="audio/mp3">
        Your browser does not support the audio element.
      </audio>

      <!-- VIDEO -->
      <div class="mt-8 mx-auto pt-8 rounded md:hidden">
        <iframe id="video-iframe" width="300" height="200" src="https://www.youtube.com/embed/BSrzmS2yuQQ"
          title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen class="mx-auto rounded"></iframe>
      </div>
      <div class="mt-12 mx-auto rounded hidden md:block">
        <iframe id="video-iframe" width="560" height="315" src="https://www.youtube.com/embed/BSrzmS2yuQQ"
          title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen class="mx-auto rounded"></iframe>
      </div>

    </main>
    <footer
      class="shadow-lg mt-12 h-40 w-full flex flex-col space-y-2 items-center justify-center pt-2 bg-black md:pt-4">
      <div class="flex items-center justify-center space-x-3">
        <a href="https://ethyl2.github.io/primary-song-activities/" title="back to home"
          class="bg-white p-px rounded shadow hover:bg-green-400 shake">
          <img src="./images/home.png" alt="music note" class="w-7 h-7 md:w-10 md:h-10" />
          <span class="sr-only">Back to Home</span>
        </a>
        <a href="https://www.churchofjesuschrist.org/music/library/hymns/redeemer-of-israel?lang=eng" target="_blank"
          title="simplified sheet music" class="bg-white p-px rounded shadow hover:bg-yellow-400 shake"
          rel="noopener nofollow noreferrer">
          <img src="./images/music-note-icon.png" alt="music note" class="w-7 h-7 md:w-10 md:h-10" />
          <span class="sr-only">Link to Sheet Music in Hymn Book</span>
        </a>

        <a href="https://github.com/ethyl2/primary-song-activities" target="_blank" rel="noopener noreferrer"
          class="p-px rounded bg-white shadow hover:bg-red-400 shake" title="link to GitHub repository">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true"
            class="w-7 h-7 md:w-10 md:h-10" focusable="false" width="1.73em" height="1.5em" style="
                                          -ms-transform: rotate(360deg);
                                          -webkit-transform: rotate(360deg);
                                          transform: rotate(360deg);
                                      " preserveAspectRatio="xMidYMid meet" viewBox="0 0 1227.825 1000">
            <path
              d="M1078.94-.985c-33.192-.491-110.295 10.777-239.027 96.936c-70.161-17.535-144.812-26.188-219.591-26.188c-82.278 0-165.425 10.448-242.965 31.719C192.534-24.605 110.955 1.234 110.955 1.234c-53.258 133.183-20.347 231.788-10.344 256.277C38.014 325.069-.2 411.338-.2 517.07c0 79.822 9.085 151.416 31.281 213.653c1.231 4.803.832 3.732 2.906 7.844c4.89 12.884 10.327 25.39 16.438 37.468c2.094 4.346 4 7.563 4 7.563c62.395 116.307 185.396 191.438 404.244 215.028l330.995.375c233.392-23.144 345.386-98.499 396.994-215.591l3.281-7.625c4.89-11.828 9.153-24.135 20.813-65.562c11.659-41.427 16.875-113.172 16.875-193.185c0-114.755-43.1-206.577-113.092-276.434c12.231-39.48 28.57-127.158-16.313-239.402c0 0-6.293-1.995-19.281-2.188zM818.1 420.133c53.893-.117 100.057 9.136 134.717 45.499v.031c43.369 45.541 68.749 100.525 68.749 159.778c0 276.658-177.932 284.183-397.4 284.183c-219.506 0-397.4-38.336-397.4-284.183c0-58.861 25.009-113.516 67.843-158.872c71.451-75.59 192.365-35.562 329.558-35.562c70.423-.011 136.564-10.75 193.935-10.875zm-408.807 81.468c-45.666 0-82.687 61.741-82.687 137.936c0 76.206 37.019 137.967 82.687 137.967c45.666 0 82.687-61.761 82.687-137.967c0-76.184-37.019-137.881-82.687-137.936zm443.649 0c-45.666 0-82.687 61.741-82.687 137.936c0 76.206 37.019 137.967 82.687 137.967c45.666 0 82.687-61.761 82.687-137.967c0-76.184-37.019-137.881-82.687-137.936z"
              fill="black" />
          </svg>
          <span class="sr-only">GitHub Repo</span>
        </a>
      </div>

      <p class="text-center text-sm text-black md:text-base">Copyright <span id="current-year">2022</span>
        <a href="https://github.com/ethyl2" target="_blank" class="hover:underline">Heather Nuffer</a>
      </p>
    </footer>
  </body>
  <script>
    const currentYearSpan = document.getElementById('current-year')
    currentYearSpan.textContent = new Date().getFullYear()

    const wordChoices = [
      'redeemer', 'Israel', 'delight', 'blessing', 'shadow', 'pillar', 'king', 'deliverer', 'sheep', 'Zion', 'love', 'valley', 'wilderness', 'wander', 'strangers', 'cry', 'desert', 'foes', 'free', 'children',
      'tidings', 'tokens', 'kingdom', 'fear not', 'redemption', 'Savior', 'comfort', 'holy place', 'hope', 'heart', 'angels', 'eternity', 'praise'
    ]

    // https://stackoverflow.com/questions/17891173/how-to-efficiently-randomly-select-array-item-without-repeats
    function randomNoRepeats(array) {
        let copy = array.slice(0);
        return function () {
          if (copy.length < 1) { copy = array.slice(0); }
          const index = Math.floor(Math.random() * copy.length);
          const item = copy[index];
          copy.splice(index, 1);
          return item;
        };
      }

    const getWordForGrid = randomNoRepeats(wordChoices, false)
    const getCurrentWord = randomNoRepeats(wordChoices, true)
    let currentWord = ''
    const wordButton = document.getElementById('word-button')
    const currentWordEl = document.getElementById('current-word')

    const bingoBoard = document.getElementById('bingo')
    for (let i=0; i<5; i++) {
      const row = document.createElement('div')
      row.classList.add('grid', 'grid-cols-5', 'divide-x-2', 'border-b-2', 'border-black' , 'divide-black', 'border-r-2')
      for (let j = 0; j < 5; j++) {
        const square = document.createElement('div')
        square.classList.add('h-20', 'w-20', 'flex', 'items-center', 'text-center', 'justify-center', 'md:h-32', 'md:w-32', 'cursor-pointer', 'overflow-hidden')

        if (i === 2 && j === 2) {
          square.textContent = 'FREE'
          square.classList.add('bg-yellow-300', 'hover:bg-yellow-200')
          square.addEventListener('click', () => {
            square.classList.toggle('bg-yellow-300')
            square.classList.toggle('hover:bg-yellow-200')
            square.classList.toggle('hover:bg-red-600')
            square.classList.toggle('bg-red-700')
            square.classList.toggle('text-white')
          })
        } else {
          const wordForSquare = getWordForGrid()
          square.textContent = wordForSquare
          square.classList.add('hover:bg-gray-100', 'square', 'cursor-not-allowed')
          square.addEventListener('click', () => {
            if (currentWord === wordForSquare) {
              square.classList.toggle('bg-red-700')
              square.classList.toggle('hover:bg-red-600')
              square.classList.toggle('text-white')
            }
        })
      }
        row.append(square)
      }
      bingoBoard.append(row)
      shouldReset = true
    }

    const squareEls = document.getElementsByClassName('square')
    console.log(squareEls)

    wordButton.addEventListener('click', () => {
      const newCurrentWord = getCurrentWord()
      currentWordEl.textContent = newCurrentWord
      currentWord = newCurrentWord
      Array.from(squareEls).forEach(el => {
        if (el.textContent === currentWord) {
          el.classList.remove('cursor-not-allowed')
          el.classList.add('cursor-pointer')
        } else {
          el.classList.remove('cursor-pointer')
          el.classList.add('cursor-not-allowed')
        }
      })
    })

    // Handle accessibility
    var enableAnimations = false;
    var reduceMotionQuery = matchMedia("(prefers-reduced-motion)");

    // Handle animation accessibility preferences
    function setAccessibilityState() {
      if (reduceMotionQuery.matches) {
        enableAnimations = false;
      } else {
        enableAnimations = true;
      }
    }
    setAccessibilityState();

    reduceMotionQuery.addListener(setAccessibilityState);

    function setup() {
      if (!enableAnimations) {
        // Add any animations here
      }
    }
    setup();
  </script>
</html>
