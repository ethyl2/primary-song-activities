<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>When I Am Baptized</title>
    <meta name="description" content="Activity page for the Primary song When I Am Baptized">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image"
      content="https://ethyl2.github.io/primary-song-activities/images/prophet/jacobs-sons.jpeg">
    <meta property="og:url" content="https://ethyl2.github.io/choose-to-serve-the-lord">
    <meta property="og:title" content="When I Am Baptized">
    <meta property="og:description" content="Activity page for the Primary song When I Am Baptized">
    <meta property="og:type" content="website" />
    <link rel="icon" type="image/x-icon" href="favicon.ico?">
    <link rel="apple-touch-icon" sizes="180x180"
      href="https://ethyl2.github.io/primary-song-activities/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32"
      href="https://ethyl2.github.io/primary-song-activities/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"
      href="https://ethyl2.github.io/primary-song-activities/favicon-16x16.png">
    <link rel="manifest" href="https://ethyl2.github.io/primary-song-activities/site.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kurenaido&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <style>
      @keyframes rainbow {
        0% {
          color: #fc0303
        }

        17% {
          color: #45f52a
        }

        34% {
          color: #2a7bf5
        }

        51% {
          color: #2af5e4
        }

        68% {
          color: #c92af5
        }

        85% {
          color: #f52a6e
        }

        100% {
          color: #df8816
        }
      }

      .rainbow {
        animation-name: rainbow;
        animation-duration: 15s;
        animation-iteration-count: infinite;
      }

      .multicolortext {
        background-image: linear-gradient(to left, #fc0303, #45f52a, #2a7bf5, #2af5e4, #c92af5, #f52a6e, #df8816);
        -webkit-background-clip: text;
        -moz-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      h1.multicolortext:hover {
        color: #c92af5;
      }

      footer {
        background-image: linear-gradient(to left, #fc0303, #45f52a, #2a7bf5, #2af5e4, #c92af5, #f52a6e, #df8816);
      }

      .raindrop {
        z-index: 1000;
        width: 30px;
        height: 30px;
      }

      @keyframes shake {
        0% {
          transform: translate(1px, 1px) rotate(0deg);
        }

        10% {
          transform: translate(-1px, -2px) rotate(-1deg);
        }

        20% {
          transform: translate(-3px, 0px) rotate(1deg);
        }

        30% {
          transform: translate(3px, 2px) rotate(0deg);
        }

        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }

        50% {
          transform: translate(-1px, 2px) rotate(-1deg);
        }

        60% {
          transform: translate(-3px, 1px) rotate(0deg);
        }

        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }

        80% {
          transform: translate(-1px, -1px) rotate(1deg);
        }

        90% {
          transform: translate(1px, 2px) rotate(0deg);
        }

        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }

      .shake:hover {
        /* Start the shake animation and make the animation last for 0.5 seconds */
        animation: shake 0.5s;

        /* When the animation is finished, start again */
        animation-iteration-count: infinite;
      }

      .grow:hover {
        transform: scale(1.05);
      }
    </style>
  </head>

  <body class="relative min-h-screen bg-center bg-repeat bg-contain"
    style="background-image: url('./images/rainbow/rain.png');">
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <header class="flex flex-col shadow-lg items-center justify-center py-2 pt-4 md:py-10 bg-black">
      <h1 id="title"
        class="text-bold text-xl md:text-5xl text-center font-bold pb-2 md:pb-4 multicolortext cursor-pointer shake">
        When I Am Baptized</h1>
      <p class="text-lg md:text-3xl italic multicolortext">Find the rainbows!</p>
    </header>

    <main
      class="font-sans min-h-screen flex flex-col items-center mx-auto justify-start mt-8 pb-8 mb-8 text-center space-y-6 rounded-lg w-11/12 md:w-5/6 md:my-12 md:space-y-10 xl:w-5/6">
      <img id="right-rainbow" class="hidden absolute top-0 right-0 w-24 lg:w-56 xl:w-96" style="transform: scaleX(-1);"
        src="./images/rainbow/left-rainbow.png" />
      <img id="left-rainbow" class="hidden absolute -top-6 left-0 w-24 md:-top-10 lg:w-56 xl:w-96"
        src="./images/rainbow/left-rainbow.png" />


      <div class="flex items-center justify-center pb-12 md:pb-0">
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
      </div>
      <div id="text-box"
        class="leading-loose rainbow bg-black p-4 rounded shadow-lg text-sm md:text-base hover:bg-gray-800 grow">
        <p class="leading-loose">I like to look for rainbows whenever there is rain and ponder on the beauty of an earth
          made clean again.</p>

        <p class="leading-loose">I want my life to be as clean as earth right after rain.</p>
        <p class="leading-loose">I want to be the best I can and live with God again.</p>

        <p class="leading-loose">I know when I am baptized my wrongs are washed away, and I can be forgiven and improve
          myself each day.</p>

        <p class="leading-loose">I want my life to be as clean as earth right after rain.</p>
        <p class="leading-loose">I want to be the best I can and live with God again.</p>
      </div>

      <div class="flex items-center justify-center">
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
      </div>

      <audio controls>
        <source src="./audio/when-i-am-baptized.mp3" type="audio/mp3">
        Your browser does not support the audio element.
      </audio>

      <div class="flex items-center justify-center">
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48 shake"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
      </div>

      <!-- VIDEO -->
      <div class="mt-8 mx-auto rounded md:hidden">
        <iframe id="video-iframe" width="300" height="200" src="https://www.youtube.com/embed/e6Tlch6dYOg"
          title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen class="mx-auto rounded"></iframe>
      </div>
      <div class="mt-12 mx-auto rounded hidden md:block">
        <iframe id="video-iframe" width="560" height="315" src="https://www.youtube.com/embed/e6Tlch6dYOg"
          title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen class="mx-auto rounded"></iframe>
      </div>

      <div class="flex items-center justify-center">
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
        <button class="w-24 h-12 bg-contain bg-center bg-no-repeat cloud md:w-96 md:h-48"
          style="background-image: url('./images/rainbow/cloud.png');"></button>
      </div>

      <div id="raindropContainer" class="absolute left-0 top-0 hidden">
        <span class="raindrop bg-center bg-no-repeat bg-contain pointer-events-none select-none fixed"
          style="background-image: url('./images/rainbow/raindrop.png')"></span>
      </div>
    </main>
    <footer class="shadow-lg mt-12 h-40 w-full flex flex-col space-y-2 items-center justify-center pt-2 md:pt-4">
      <div class="flex items-center justify-center space-x-3">
        <a href="https://ethyl2.github.io/primary-song-activities/" title="back to home"
          class="bg-white p-px rounded shadow hover:bg-green-400 shake">
          <img src="./images/home.png" alt="music note" class="w-7 h-7 md:w-10 md:h-10" />
          <span class="sr-only">Back to Home</span>
        </a>
        <a href="https://www.churchofjesuschrist.org/music/library/childrens-songbook/when-i-am-baptized?lang=eng"
          target="_blank" title="sheet music" class="bg-white p-px rounded shadow hover:bg-yellow-400 shake"
          rel="noopener nofollow noreferrer">
          <img src="./images/music-note-icon.png" alt="music note" class="w-7 h-7 md:w-10 md:h-10" />
          <span class="sr-only">Link to Sheet Music</span>
        </a>

        <a href="https://github.com/ethyl2/primary-song-activities" target="_blank" rel="noopener noreferrer"
          class="p-px rounded bg-white shadow hover:bg-red-400 shake" title="link to GitHub repository">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true"
            class="w-7 h-7 md:w-10 md:h-10" focusable="false" width="1.73em" height="1.5em" style="
                                          -ms-transform: rotate(360deg);
                                          -webkit-transform: rotate(360deg);
                                          transform: rotate(360deg);
                                      " preserveAspectRatio="xMidYMid meet" viewBox="0 0 1227.825 1000">
            <path
              d="M1078.94-.985c-33.192-.491-110.295 10.777-239.027 96.936c-70.161-17.535-144.812-26.188-219.591-26.188c-82.278 0-165.425 10.448-242.965 31.719C192.534-24.605 110.955 1.234 110.955 1.234c-53.258 133.183-20.347 231.788-10.344 256.277C38.014 325.069-.2 411.338-.2 517.07c0 79.822 9.085 151.416 31.281 213.653c1.231 4.803.832 3.732 2.906 7.844c4.89 12.884 10.327 25.39 16.438 37.468c2.094 4.346 4 7.563 4 7.563c62.395 116.307 185.396 191.438 404.244 215.028l330.995.375c233.392-23.144 345.386-98.499 396.994-215.591l3.281-7.625c4.89-11.828 9.153-24.135 20.813-65.562c11.659-41.427 16.875-113.172 16.875-193.185c0-114.755-43.1-206.577-113.092-276.434c12.231-39.48 28.57-127.158-16.313-239.402c0 0-6.293-1.995-19.281-2.188zM818.1 420.133c53.893-.117 100.057 9.136 134.717 45.499v.031c43.369 45.541 68.749 100.525 68.749 159.778c0 276.658-177.932 284.183-397.4 284.183c-219.506 0-397.4-38.336-397.4-284.183c0-58.861 25.009-113.516 67.843-158.872c71.451-75.59 192.365-35.562 329.558-35.562c70.423-.011 136.564-10.75 193.935-10.875zm-408.807 81.468c-45.666 0-82.687 61.741-82.687 137.936c0 76.206 37.019 137.967 82.687 137.967c45.666 0 82.687-61.761 82.687-137.967c0-76.184-37.019-137.881-82.687-137.936zm443.649 0c-45.666 0-82.687 61.741-82.687 137.936c0 76.206 37.019 137.967 82.687 137.967c45.666 0 82.687-61.761 82.687-137.967c0-76.184-37.019-137.881-82.687-137.936z"
              fill="black" />
          </svg>
          <span class="sr-only">GitHub Repo</span>
        </a>
      </div>

      <p class="text-center text-sm text-black md:text-base">Copyright <span id="current-year">2021</span>
        <a href="https://github.com/ethyl2" target="_blank" class="hover:underline">Heather Nuffer</a>
      </p>
    </footer>
  </body>
  <script>
    const currentYearSpan = document.getElementById('current-year')
    currentYearSpan.textContent = new Date().getFullYear()
    const cloudEls = document.getElementsByClassName('cloud')
    const textBoxEl = document.getElementById('text-box')
    const leftRainbow = document.getElementById('left-rainbow')
    const titleEl = document.getElementById('title')
    const rightRainbow = document.getElementById('right-rainbow')
    Array.from(cloudEls).forEach(cloudEl => {
      cloudEl.addEventListener('click', () => {
        cloudEl.style.backgroundImage = "url('./images/rainbow/rainbow1.png')"
      })
    })

    textBoxEl.addEventListener('click', () => {
      leftRainbow.classList.toggle('hidden')
    })
    titleEl.addEventListener('click', () => {
      rightRainbow.classList.toggle('hidden')
    })
    // Adapted from https://www.kirupa.com/html5/the_falling_snow_effect.htm
    // Array to store our Raindrop objects
    var raindrops = [];

    // Global variables to store our browser's window size
    var browserWidth;
    var browserHeight;

    // Specify the number of raindrops you want visible
    var numberOfRaindrops = 50;

    // Flag to reset the position of the raindrops
    var resetPosition = false;

    // Handle accessibility
    var enableAnimations = false;
    var reduceMotionQuery = matchMedia("(prefers-reduced-motion)");

    // Handle animation accessibility preferences
    function setAccessibilityState() {
      if (reduceMotionQuery.matches) {
        enableAnimations = false;
      } else {
        enableAnimations = true;
      }
    }
    setAccessibilityState();

    reduceMotionQuery.addListener(setAccessibilityState);

    //
    // It all starts here...
    //
    function setup() {
      if (enableAnimations) {
        // window.addEventListener("DOMContentLoaded", generateRaindrops, false);
        // window.addEventListener("resize", setResetFlag, false);
      }
    }
    setup();

    //
    // Constructor for our Raindrop object
    //
    function Raindrop(element, speed, xPos, yPos) {
      // set initial raindrop properties
      this.element = element;
      this.speed = speed;
      this.xPos = xPos;
      this.yPos = yPos;
      this.scale = 1;
      this.flipped = Math.floor(Math.random() * 2) === 1

      // declare variables used for raindrop's motion
      this.counter = 0;
      this.sign = Math.random() < 0.5 ? 1 : -1

      // setting an initial opacity and size for our raindrop
      this.element.style.opacity = (.1 + Math.random()) / 1.5
    }

    //
    // The function responsible for actually moving our raindrop
    //
    Raindrop.prototype.update = function () {
      // using some trigonometry to determine our x and y position
      this.counter += this.speed / 5000
      this.xPos += this.sign * this.speed * Math.cos(this.counter) / 120 // 40 was original denominator
      this.yPos += Math.sin(this.counter) / 40 + this.speed / 30
      this.scale = .55 + Math.abs(10 * Math.cos(this.counter) / 20)

      // setting our raindrop's position
      setTransform(Math.round(this.xPos), Math.round(this.yPos), this.scale, this.element, this.flipped)

      // if raindrop goes below the browser window, move it back to the top
      if (this.yPos > browserHeight) {
        this.yPos = -50
      }
    }

    //
    // A performant way to set a raindrop's position and size
    //
    function setTransform(xPos, yPos, scale, el, isFlipped) {
      if (isFlipped) {
        el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0) scale(${scale}, ${scale}) rotateY(150deg)`
      } else {
        el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0) scale(${scale}, ${scale})`
      }
    }

    //
    // The function responsible for creating the raindrop
    //
    function generateRaindrops() {

      // get our raindrop element from the DOM and store it
      var originalRaindrop = document.querySelector(".raindrop")

      // access our raindrop element's parent container
      var raindropContainer = originalRaindrop.parentNode
      raindropContainer.style.display = "block"

      // get our browser's size
      browserWidth = document.documentElement.clientWidth
      browserHeight = document.documentElement.clientHeight

      // create each individual raindrop
      for (let i = 0; i < numberOfRaindrops; i++) {

        // clone our original raindrop and add it to raindropContainer
        const raindropClone = originalRaindrop.cloneNode(true)
        raindropContainer.appendChild(raindropClone)

        // set our raindrop's initial position and related properties
        var initialXPos = getPosition(50, browserWidth)
        var initialYPos = getPosition(50, browserHeight)
        var speed = 5 + Math.random() * 300 // 140 was the original multiplier

        // create our raindrop object
        var raindropObject = new Raindrop(raindropClone,
          speed,
          initialXPos,
          initialYPos)
        raindrops.push(raindropObject)
      }

      // remove the original raindrop because we no longer need it visible
      raindropContainer.removeChild(originalRaindrop)

      moveRaindrops()
    }

    //
    // Responsible for moving each raindrop by calling its update function
    //
    function moveRaindrops() {

      if (enableAnimations) {
        for (let i = 0; i < raindrops.length; i++) {
          const raindrop = raindrops[i]
          raindrop.update()
        }
      }

      // Reset the position of all the raindrops to a new value
      if (resetPosition) {
        browserWidth = document.documentElement.clientWidth
        browserHeight = document.documentElement.clientHeight

        for (var i = 0; i < raindrops.length; i++) {
          var raindrop = raindrops[i]

          raindrop.xPos = getPosition(50, browserWidth)
          raindrop.yPos = getPosition(50, browserHeight)
        }

        resetPosition = false;
      }

      requestAnimationFrame(moveRaindrops);
    }

    //
    // This function returns a number between (maximum - offset) and (maximum + offset)
    //
    function getPosition(offset, size) {
      return Math.round(-1 * offset + Math.random() * (size + 2 * offset))
    }

    //
    // Trigger a reset of all the Raindrops' positions
    //
    function setResetFlag(e) {
      resetPosition = true
    }
  </script>

</html>
